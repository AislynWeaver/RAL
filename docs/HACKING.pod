=head1 Technical Documentation

Hello friends. If you are interested in contributing to the development of
RAL, this file will help you to get started.

First and foremost, ensure that you are on the C<develop> branch. This is
the developer's branch. C<master> is considered production-stable and is
only merged with develop for stable releases.

=head2 Submitting Patches / Pull Requests

Either mail me at L<yumi@prettyboytellem.com|mailto:yumi@prettyboytellem.com> or join the IRC at
L<howler.space:6667|irc://howler.space:6667> #bigtown. A PR is also fine but
I would prefer that you either send a .patch (for small things), or link me
the repository with your feature branch (for larger things)

=head2 Style

In general, I follow a K&R style when writing. If you see any mistakes or
trailing whitespace, you may send a .patch to my e-mail address. or link it
in the IRC. It's a great way to introduce yourself!

=head2 Bloody Details

This is a break-down of how it all works.

=head3 Database Schema

The text is an important part of a forum / textboard! So the first thing I
will describe is the structure of the data inside our SQL database.

 MariaDB [ral]> SHOW TABLES;
 +---------------+
 | Tables_in_ral |
 +---------------+
 | Bans          |
 | Posts         |
 | Timelines     |
 +---------------+

=head4 `Bans`

 MariaDB [ral]> DESCRIBE `Bans`;
 +-------+--------------+------+-----+---------------------+-------+
 | Field | Type         | Null | Key | Default             | Extra |
 +-------+--------------+------+-----+---------------------+-------+
 | Id    | varchar(256) | NO   | PRI | NULL                |       |
 | Type  | varchar(64)  | NO   |     | NULL                |       |
 | Date  | datetime     | YES  |     | current_timestamp() |       |
 +-------+--------------+------+-----+---------------------+-------+

Banned users get their own special row in C<`Bans`>! Only the C<'SLOW'> ban
type is implemented.

=head4 `Posts`

 MariaDB [ral]> DESCRIBE `Posts`;
 +----------+--------------+------+-----+---------------------+-------+
 | Field    | Type         | Null | Key | Default             | Extra |
 +----------+--------------+------+-----+---------------------+-------+
 | Id       | int(11)      | NO   | PRI | NULL                |       |
 | Created  | datetime     | YES  |     | current_timestamp() |       |
 | Timeline | varchar(16)  | NO   | PRI | NULL                |       |
 | Topic    | int(11)      | NO   |     | NULL                |       |
 | Content  | text         | NO   |     | ''                  |       |
 | Auth     | varchar(512) | NO   |     | NULL                |       |
 +----------+--------------+------+-----+---------------------+-------+

Every row in C<`Posts`> corresponds to a topic or post in any continuity.
You will notice posts are keyed by both their C<`Id`> and C<`Timeline`>,
meaning that the first post on one continuity is independent of the first
post on other continuities. The C<`Auth`> is a hold-over a time where posts
could be "kept open" until purposely closed by the author. Now it simply
confirms which posts you have made.

=head4 `Timelines`

 MariaDB [ral]> DESCRIBE `Timelines`;
 +-------------+-------------+------+-----+---------+-------+
 | Field       | Type        | Null | Key | Default | Extra |
 +-------------+-------------+------+-----+---------+-------+
 | Name        | varchar(16) | NO   | PRI | NULL    |       |
 | Post Count  | int(11)     | YES  |     | 0       |       |
 | Description | varchar(32) | YES  |     | NULL    |       |
 +-------------+-------------+------+-----+---------+-------+

C<`Timelines`> is a bit of a legacy name which has resulted from the many
re-writes of RAL. This table simply contains all of the website's
continuities; the C<`Post Count`> of each continuity increments
independently of the others.

=head3 Posting

When a user opens a postbox, either by clicking "Reply to topic" or "Create
a topic", a I<Robocheck> image is generated using C<CONFIG_WORDLIST>. If you
are able to verify the word engrained in the image, you win! And are allowed
to post,  given that your post length is somewhere between 0 and
C<CONFIG_MAX_POSTLEN>.
